
     <style type="text/css">p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #000000} span.s1 {font-variant-ligatures: no-common-ligatures} </style>  <br /><div class="p1"><span class="s1"><span style="font-size: small;">Plists have a terrible "key-node followed by value node" format:</span></span></div><div class="p1"><br /></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;"><plist></plist></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;"> </span><key>TestFailureSummaries</key></span></span></div><br /><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;"> </span><array></array></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">  </span><dict></dict></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">   </span><key>IssueType</key></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">   </span><string>Uncategorized</string></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">   </span><key>Message</key></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">   </span><string>failed - FORCED FAILURE</string></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">   </span><key>Target</key></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">   </span><string>VrtcalSDKInternalTestAppUITests</string></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">   </span><key>TestCase</key></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">   </span><string>QA_TestCases_01_04_67_basicBanner.testGo()</string></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;">  </span></span></span></div><div class="p1"><span style="font-family: Courier New, Courier, monospace;"><span style="font-variant-ligatures: no-common-ligatures;"><span style="white-space: pre;"> </span></span></span></div><br /><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;"><plist></plist></span></span></div><div class="p1"><span class="s1"><br /></span></div><div class="p1"><span class="s1"><span style="font-size: small;">My Desired output is to get the TestCase followed by the Message for each failure:</span></span></div><div class="p1"><span class="s1"><br /></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">QA_TestCases_01_04_67_basicBanner.testGo(): failed - FORCED FAILURE</span></span></div><br /><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">    <style type="text/css">p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #000000} span.s1 {font-variant-ligatures: no-common-ligatures} </style>   </span></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">QA_TestCases_01_04_67_basicBanner.testGo(): failed - FORCED FAILURE</span></span></div><br /><div class="p1"><br /></div><div class="p1"><span style="font-size: small;">Here's how to do that:</span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">xmlstarlet sel -t -m "//key[text()='TestFailureSummaries']/following-sibling::array[1]/dict" -c "concat(key[text()='TestCase']/following-sibling::string[1]/text(), ': ', key[text()='Message']/following-sibling::string[1]/text())" -n Info.plist</span></span></div><div class="p1"><span class="s1"><span style="font-size: small; font-variant-ligatures: normal;"><br /></span></span></div><div class="p1"><span class="s1"><span style="font-size: small; font-variant-ligatures: normal;">Explanation:</span></span></div><div class="p1"><span style="font-size: small;">A -t signals the start of a new template. The -m means "for each item in this set, do the next flag", which in this case is a -c for "get a copy of this".&nbsp;</span></div><div class="p1"><span style="font-size: small;"><br /></span></div><div class="p1"><span style="font-size: small;">The nice thing about this chaining is that we can use the -m portion to get us an array of items to be processed by the -c portion!</span></div><div class="p1"><span style="font-size: small;"><br /></span></div><div class="p1"><span style="font-size: small;"><br /></span></div><div class="p1"><span style="font-size: small;"><br /></span></div><div class="p1"><span style="font-size: small;"><br /></span></div><pre class="programlisting" style="background: rgb(240, 240, 240); border: 1px solid gray; font-size: 10pt; padding: 2px;">xml sel -t -c "xpath0" -m "xpath1" -m "xpath2" -v "xpath3" \<br />        -t -m "xpath4" -c "xpath5"<br /><br />is equivalent to applying the following XSLT<br /><br /><br /><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><br /><xsl:template match="/"><br />  <xsl:call-template name="t1"><br />  <xsl:call-template name="t2"><br /></xsl:call-template></xsl:call-template></xsl:template><br /><xsl:template name="t1"><br />  <xsl:copy-of select="xpath0"><br />  <xsl:for-each select="xpath1"><br />    <xsl:for-each select="xpath2"><br />      <xsl:value-of select="xpath3"><br />    </xsl:value-of></xsl:for-each><br />  </xsl:for-each><br /></xsl:copy-of></xsl:template><br /><xsl:template name="t2"><br />  <xsl:for-each select="xpath4"><br />    <xsl:copy-of select="xpath5"><br />  </xsl:copy-of></xsl:for-each><br /></xsl:template><br /></xsl:stylesheet></pre>