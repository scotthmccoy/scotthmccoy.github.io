---
layout: post
title: Understanding Typhoon
date: '2014-10-30T16:39:00.003-07:00'
author: Scott McCoy
tags: 
modified_time: '2014-10-30T16:39:34.077-07:00'
thumbnail: http://3.bp.blogspot.com/-FcbiuvW9nPA/VFKsLV-r1xI/AAAAAAAAAQc/IlyodlBciC4/s72-c/Screen%2BShot%2B2014-10-30%2Bat%2B2.22.26%2BPM.png
blogger_id: tag:blogger.com,1999:blog-250956833460526415.post-1528230644923573247
blogger_orig_url: https://scotthmccoy.blogspot.com/2014/10/understanding-typhoon.html
---

Their example app makes it seem pretty simple.<br /><br />At launch, The PocketForecast-Info.plist (The applications info.plist) directs Typhoon to load PFApplicationAssembly, PFCoreComponents, and PFThemeAssembly.<br /><br />PFApplicationAssembly's appDelegate method creates the appDelegate and sets the appDelegate's window, cityDao and rootViewController properties. The assembly file is thus a kind of configuration file, and lets us do DI without having to have inits with massively long signatures.<br /><br />You can add typhoonWillInject and typhoonDidInject to do stuff like set up the view on a VC before injection, or validate that the required stuff did get injected. It's pretty sweet.<br /><br /><br />The tests are where it gets hard to follow. I'm seeing that most properties are not typed to classes, but to <i>protocols</i>!<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/-FcbiuvW9nPA/VFKsLV-r1xI/AAAAAAAAAQc/IlyodlBciC4/s1600/Screen%2BShot%2B2014-10-30%2Bat%2B2.22.26%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-FcbiuvW9nPA/VFKsLV-r1xI/AAAAAAAAAQc/IlyodlBciC4/s1600/Screen%2BShot%2B2014-10-30%2Bat%2B2.22.26%2BPM.png" /></a></div><br /><br />So the PFAddCityViewController can receive anything for the PFCityDao that <i>conforms to a protocol,</i>&nbsp;and it doesn't care what that object actually is. This is pretty fucking swell for testing.<br /><br /><br />Speaking of testing...<br /><br />In PFCityDoaTests, The TyphoonComponentFactory uses componentForKey to invoke the cityDao from PFCoreComponents to create a PFCityDaoUserDefaultsImpl (which matches <pfcitydao>). Also really great for testing! Lets us test the shit out of the object.&nbsp;</pfcitydao><br />        <br />        <div class="separator" style="clear: both; text-align: left;"><a href="http://1.bp.blogspot.com/-uTlg6cdvoS0/VFKzeRkYfZI/AAAAAAAAAQs/qeZ77NrqVGc/s1600/Screen%2BShot%2B2014-10-30%2Bat%2B2.53.14%2BPM.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-uTlg6cdvoS0/VFKzeRkYfZI/AAAAAAAAAQs/qeZ77NrqVGc/s1600/Screen%2BShot%2B2014-10-30%2Bat%2B2.53.14%2BPM.png" /></a></div><br /><a href="http://2.bp.blogspot.com/-7jiEv8t1iNM/VFKzeVSKVEI/AAAAAAAAAQw/I6O1tVaN0bo/s1600/Screen%2BShot%2B2014-10-30%2Bat%2B2.51.26%2BPM.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><br /></a><a href="http://2.bp.blogspot.com/-7jiEv8t1iNM/VFKzeVSKVEI/AAAAAAAAAQw/I6O1tVaN0bo/s1600/Screen%2BShot%2B2014-10-30%2Bat%2B2.51.26%2BPM.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><br /></a><a href="http://2.bp.blogspot.com/-7jiEv8t1iNM/VFKzeVSKVEI/AAAAAAAAAQw/I6O1tVaN0bo/s1600/Screen%2BShot%2B2014-10-30%2Bat%2B2.51.26%2BPM.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-7jiEv8t1iNM/VFKzeVSKVEI/AAAAAAAAAQw/I6O1tVaN0bo/s1600/Screen%2BShot%2B2014-10-30%2Bat%2B2.51.26%2BPM.png" /></a><br /><br /><br /><br /><br />